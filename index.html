<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚˜ë§Œì˜ ë¡œë˜ 50 - í•˜ì´ë¸Œë¦¬ë“œ</title>
    <style>
        body { font-family: 'Pretendard', -apple-system, sans-serif; background-color: #f1f5f9; margin: 0; padding: 20px; color: #333; }
        .container { max-width: 650px; margin: 0 auto; background: white; padding: 25px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); }
        
        h1 { text-align: center; margin-bottom: 5px; color: #1e293b; }
        .sub-text { text-align: center; color: #64748b; font-size: 0.9rem; margin-bottom: 20px; }

        /* ì»¨íŠ¸ë¡¤ íŒ¨ë„ */
        .control-panel { display: flex; gap: 10px; margin-bottom: 20px; }
        .btn { flex: 1; padding: 15px; border: none; border-radius: 12px; font-weight: bold; font-size: 1rem; cursor: pointer; transition: 0.2s; }
        
        .btn-auto { background: #3b82f6; color: white; }
        .btn-auto:hover { background: #2563eb; }
        
        .btn-check { background: #10b981; color: white; }
        .btn-check:hover { background: #059669; }

        /* ì…ë ¥ ì˜ì—­ */
        .input-area { background: #f8fafc; padding: 20px; border-radius: 15px; border: 2px solid #e2e8f0; margin-bottom: 20px; text-align: center; }
        .input-label { display: block; margin-bottom: 10px; font-weight: bold; color: #475569; }
        
        .ball-inputs { display: flex; justify-content: center; gap: 5px; flex-wrap: wrap; }
        .ball-input { 
            width: 40px; height: 40px; text-align: center; font-size: 18px; font-weight: bold;
            border: 2px solid #cbd5e1; border-radius: 50%; outline: none; background: #fff;
        }
        .ball-input:focus { border-color: #3b82f6; box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2); }
        .plus { align-self: center; font-weight: bold; color: #94a3b8; }

        /* ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ */
        .result-list { display: flex; flex-direction: column; gap: 8px; }
        .row { display: flex; align-items: center; justify-content: space-between; padding: 10px 15px; background: white; border: 1px solid #e2e8f0; border-radius: 10px; }
        .idx { font-size: 0.8rem; color: #94a3b8; width: 25px; }
        
        .balls { display: flex; gap: 4px; }
        .ball { width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold; color: white; background: #cbd5e1; }
        
        /* ê³µ ìƒ‰ìƒ */
        .c1 { background: #facc15; color: #333; }
        .c2 { background: #3b82f6; }
        .c3 { background: #ef4444; }
        .c4 { background: #94a3b8; }
        .c5 { background: #22c55e; }

        /* ë‹¹ì²¨ ê°•ì¡° */
        .ball.hit { transform: scale(1.2); border: 2px solid #1e293b; box-shadow: 0 2px 5px rgba(0,0,0,0.2); z-index: 5; }

        /* ë“±ìˆ˜ ë±ƒì§€ */
        .badge { padding: 4px 8px; border-radius: 6px; font-size: 12px; font-weight: bold; color: white; min-width: 40px; text-align: center; }
        .r1 { background: #ef4444; }
        .r2 { background: #f97316; }
        .r3 { background: #22c55e; }
        .r4 { background: #0ea5e9; }
        .r5 { background: #64748b; }

        /* ìš”ì•½ì°½ */
        .summary { background: #fffbeb; border: 1px solid #fcd34d; color: #92400e; padding: 15px; border-radius: 10px; margin-bottom: 20px; display: none; }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ€ ë¡œë˜ 50ì„¸íŠ¸ í™•ì¸</h1>
    <div class="sub-text">ìë™ ì¡°íšŒê°€ ì•ˆ ë˜ë©´ ìˆ«ìë¥¼ ì§ì ‘ ì…ë ¥í•˜ì„¸ìš”</div>

    <div class="control-panel">
        <button class="btn btn-auto" onclick="fetchLotto()">ğŸ”„ ìµœì‹ ë²ˆí˜¸ ìë™ì¡°íšŒ</button>
        <button class="btn btn-check" onclick="calculate()">âœ… ë‹¹ì²¨ í™•ì¸í•˜ê¸°</button>
    </div>

    <div class="input-area">
        <span class="input-label" id="statusText">ë‹¹ì²¨ ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ê±°ë‚˜ ìë™ì¡°íšŒ ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”</span>
        <div class="ball-inputs">
            <input type="number" class="ball-input" id="n1">
            <input type="number" class="ball-input" id="n2">
            <input type="number" class="ball-input" id="n3">
            <input type="number" class="ball-input" id="n4">
            <input type="number" class="ball-input" id="n5">
            <input type="number" class="ball-input" id="n6">
            <span class="plus">+</span>
            <input type="number" class="ball-input" id="bonus">
        </div>
    </div>

    <div class="summary" id="summaryBox"></div>
    <div class="result-list" id="listArea"></div>
</div>

<script>
    // 50ì„¸íŠ¸ ë°ì´í„° (ì‚¬ìš©ì ë²ˆí˜¸)
    const mySets = [
        [2, 13, 21, 28, 34, 37], [5, 14, 22, 29, 31, 38], [3, 16, 24, 27, 30, 39], [9, 12, 20, 25, 33, 36], [4, 15, 23, 26, 31, 32],
        [7, 18, 22, 29, 34, 35], [1, 19, 24, 28, 33, 36], [6, 17, 21, 25, 30, 32], [8, 11, 23, 26, 35, 38], [10, 13, 24, 29, 31, 36],
        [2, 15, 20, 27, 33, 34], [5, 16, 22, 25, 30, 39], [4, 18, 23, 29, 31, 36], [7, 12, 21, 28, 35, 38], [9, 14, 26, 27, 32, 33],
        [3, 19, 24, 25, 30, 34], [6, 11, 22, 29, 37, 38], [1, 20, 23, 28, 35, 36], [8, 17, 24, 25, 31, 32], [10, 15, 21, 26, 33, 34],
        [2, 13, 22, 29, 35, 36], [5, 18, 24, 27, 31, 38], [4, 11, 23, 26, 30, 39], [7, 16, 25, 28, 33, 34], [9, 14, 21, 29, 32, 35],
        [3, 20, 22, 27, 31, 36], [6, 15, 24, 25, 30, 38], [1, 12, 26, 29, 33, 34], [8, 19, 21, 28, 35, 36], [10, 17, 23, 24, 32, 39],
        [2, 11, 25, 28, 34, 37], [5, 14, 21, 26, 33, 36], [4, 15, 22, 29, 31, 38], [7, 18, 24, 27, 30, 35], [9, 12, 23, 28, 32, 39],
        [3, 16, 21, 26, 34, 37], [6, 13, 25, 29, 30, 36], [1, 14, 22, 27, 31, 38], [8, 20, 24, 25, 33, 34], [10, 11, 18, 26, 35, 39],
        [2, 15, 23, 30, 34, 41], [5, 12, 21, 28, 36, 43], [4, 17, 24, 29, 31, 40], [7, 14, 22, 25, 38, 39], [9, 16, 26, 27, 33, 34],
        [3, 13, 20, 31, 35, 42], [6, 18, 21, 28, 32, 45], [1, 19, 24, 29, 30, 44], [8, 15, 23, 26, 37, 38], [10, 12, 25, 27, 36, 39]
    ];

    function getColor(n) {
        if(n<=10) return 'c1';
        if(n<=20) return 'c2';
        if(n<=30) return 'c3';
        if(n<=40) return 'c4';
        return 'c5';
    }

    // íšŒì°¨ ê³„ì‚°
    function getRound() {
        const start = new Date('2002-12-07T21:00:00');
        const now = new Date();
        const diff = now - start;
        let r = Math.floor(diff / (1000 * 60 * 60 * 24 * 7)) + 1;
        if (now.getDay() === 6 && now.getHours() < 21) r--; 
        return r;
    }

    // ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (ê°€ì¥ ê°•ë ¥í•œ ë°©ì‹ ì‚¬ìš©)
    async function fetchLotto() {
        const status = document.getElementById('statusText');
        status.innerText = "â³ ì„œë²„ì™€ í†µì‹  ì¤‘ì…ë‹ˆë‹¤...";
        
        const round = getRound();
        // AllOriginsë¥¼ JSON íŒŒì‹± ë°©ì‹ìœ¼ë¡œ í˜¸ì¶œ (ì„±ê³µë¥  ê°€ì¥ ë†’ìŒ)
        const url = `https://api.allorigins.win/get?url=${encodeURIComponent('https://www.dhlottery.co.kr/common.do?method=getLottoNumber&drwNo=' + round)}`;

        try {
            const res = await fetch(url);
            const rawData = await res.json();
            const data = JSON.parse(rawData.contents); // ì¤‘ìš”: ë‚´ìš©ë¬¼ íŒŒì‹±

            if (data.returnValue === 'success') {
                document.getElementById('n1').value = data.drwtNo1;
                document.getElementById('n2').value = data.drwtNo2;
                document.getElementById('n3').value = data.drwtNo3;
                document.getElementById('n4').value = data.drwtNo4;
                document.getElementById('n5').value = data.drwtNo5;
                document.getElementById('n6').value = data.drwtNo6;
                document.getElementById('bonus').value = data.bnusNo;
                
                status.innerText = `ğŸ‰ ${round}íšŒì°¨ ì •ë³´ë¥¼ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤! [í™•ì¸]ì„ ëˆ„ë¥´ì„¸ìš”.`;
                status.style.color = "blue";
            } else {
                throw new Error("No data");
            }
        } catch (e) {
            status.innerText = "âš ï¸ ìë™ ì¡°íšŒ ì‹¤íŒ¨. ìˆ«ìë¥¼ ì§ì ‘ ì…ë ¥í•´ì£¼ì„¸ìš”!";
            status.style.color = "red";
            // ì…ë ¥ì°½ ì´ˆê¸°í™” ì•ˆí•¨ (ì§ì ‘ ì…ë ¥ ìœ ë„)
        }
    }

    // ê³„ì‚°í•˜ê¸°
    function calculate() {
        const wins = [
            parseInt(document.getElementById('n1').value),
            parseInt(document.getElementById('n2').value),
            parseInt(document.getElementById('n3').value),
            parseInt(document.getElementById('n4').value),
            parseInt(document.getElementById('n5').value),
            parseInt(document.getElementById('n6').value)
        ];
        const bonus = parseInt(document.getElementById('bonus').value);

        if(wins.some(isNaN) || isNaN(bonus)) {
            alert("ë²ˆí˜¸ 6ê°œì™€ ë³´ë„ˆìŠ¤ ë²ˆí˜¸ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return;
        }

        const listArea = document.getElementById('listArea');
        listArea.innerHTML = '';
        
        let ranks = {1:0, 2:0, 3:0, 4:0, 5:0};
        let money = 0;

        mySets.forEach((set, idx) => {
            let hit = 0;
            let bHit = false;
            
            // ë¡œìš° ìƒì„±
            const row = document.createElement('div');
            row.className = 'row';

            // ì¸ë±ìŠ¤
            const idxSp = document.createElement('span');
            idxSp.className = 'idx';
            idxSp.innerText = idx + 1;
            row.appendChild(idxSp);

            // ê³µ ê·¸ë¦¬ê¸°
            const ballsDiv = document.createElement('div');
            ballsDiv.className = 'balls';

            set.forEach(n => {
                const b = document.createElement('div');
                let cls = `ball ${getColor(n)}`;
                
                if(wins.includes(n)) {
                    cls += ' hit';
                    hit++;
                } else if(n === bonus) {
                    cls += ' hit';
                    bHit = true;
                }
                b.className = cls;
                b.innerText = n;
                ballsDiv.appendChild(b);
            });
            row.appendChild(ballsDiv);

            // ë“±ìˆ˜
            let badgeHtml = '';
            if(hit === 6) { badgeHtml = '<span class="badge r1">1ë“±</span>'; ranks[1]++; }
            else if(hit === 5 && bHit) { badgeHtml = '<span class="badge r2">2ë“±</span>'; ranks[2]++; }
            else if(hit === 5) { badgeHtml = '<span class="badge r3">3ë“±</span>'; ranks[3]++; }
            else if(hit === 4) { badgeHtml = '<span class="badge r4">4ë“±</span>'; ranks[4]++; money+=50000; }
            else if(hit === 3) { badgeHtml = '<span class="badge r5">5ë“±</span>'; ranks[5]++; money+=5000; }
            
            const badgeDiv = document.createElement('div');
            badgeDiv.innerHTML = badgeHtml || '<span style="width:40px"></span>';
            row.appendChild(badgeDiv);
            
            listArea.appendChild(row);
        });

        // ìš”ì•½ í‘œì‹œ
        const sumBox = document.getElementById('summaryBox');
        sumBox.style.display = 'block';
        let resText = `5ë“±: ${ranks[5]}ê°œ, 4ë“±: ${ranks[4]}ê°œ`;
        if(ranks[1]>0 || ranks[2]>0 || ranks[3]>0) resText += ` ğŸš¨ ìƒìœ„ ë‹¹ì²¨ ë°œìƒ!`;
        
        sumBox.innerHTML = `<strong>ğŸ“Š ê²°ê³¼ ìš”ì•½</strong><br>${resText}<br>í™•ì • ë‹¹ì²¨ê¸ˆ: ${money.toLocaleString()}ì›`;
    }
    
    // ì´ˆê¸°í™”: ë¦¬ìŠ¤íŠ¸ë§Œ ë¨¼ì € ê·¸ë ¤ë‘ 
    calculate(); // ë¹ˆ ê°’ìœ¼ë¡œ ê·¸ë¦¬ë©´ ê³µë§Œ ë‚˜ì˜´
</script>

</body>
</html>
