import React, { useState } from 'react';
import { 
  Users, FileText, Calendar, Bell, Search, Menu, X, 
  ChevronRight, Download, Mail, Phone, MapPin, 
  LayoutGrid, Image as ImageIcon, MessageSquare, ExternalLink
} from 'lucide-react';

// --- 샘플 데이터 (실제 사용 시 수정 가능) ---
const NOTICE_DATA = [
  { id: 1, title: '2025년 1분기 성과보고 회의 일정 안내', date: '2025.01.05', author: '관리자', important: true },
  { id: 2, title: '사내 보안 시스템 업데이트 공지', date: '2025.01.03', author: 'IT지원팀', important: false },
  { id: 3, title: '설 명절 선물 지급 안내', date: '2024.12.28', author: '총무팀', important: false },
  { id: 4, title: '17G ETCH 부서 송년회 후기', date: '2024.12.20', author: '김철수', important: false },
];

const TEAM_DATA = [
  { id: 1, name: '김부장', role: '부서장', email: 'manager@company.com', phone: '010-1234-5678', img: 'https://images.unsplash.com/photo-1560250097-0b93528c311a?auto=format&fit=crop&q=80&w=200' },
  { id: 2, name: '이차장', role: '기획팀장', email: 'lee@company.com', phone: '010-2345-6789', img: 'https://images.unsplash.com/photo-1573496359-136d9198758d?auto=format&fit=crop&q=80&w=200' },
  { id: 3, name: '박과장', role: '개발팀장', email: 'park@company.com', phone: '010-3456-7890', img: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?auto=format&fit=crop&q=80&w=200' },
  { id: 4, name: '최대리', role: 'UI/UX 디자이너', email: 'choi@company.com', phone: '010-4567-8901', img: 'https://images.unsplash.com/photo-1580489944761-15a19d654956?auto=format&fit=crop&q=80&w=200' },
  { id: 5, name: '정사원', role: '프론트엔드 개발', email: 'jung@company.com', phone: '010-5678-9012', img: 'https://images.unsplash.com/photo-1519085360753-af0119f7cbe7?auto=format&fit=crop&q=80&w=200' },
  { id: 6, name: '강사원', role: '백엔드 개발', email: 'kang@company.com', phone: '010-6789-0123', img: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?auto=format&fit=crop&q=80&w=200' },
];

const RESOURCES_DATA = [
  { id: 1, category: '규정/가이드', title: '2025년도 복무 규정 가이드라인', size: '2.4MB', type: 'PDF' },
  { id: 2, category: '서식', title: '주간 업무 보고서 양식', size: '156KB', type: 'XLSX' },
  { id: 3, category: '서식', title: '지출 결의서 양식', size: '120KB', type: 'HWP' },
  { id: 4, category: '기술문서', title: 'API 연동 규격서 v2.0', size: '5.1MB', type: 'PDF' },
  { id: 5, category: '디자인', title: '회사 로고 및 CI 패키지', size: '12MB', type: 'ZIP' },
];

const GALLERY_DATA = [
  { id: 1, title: '2024 송년회', date: '2024.12.20', img: 'https://images.unsplash.com/photo-1511632765486-a01980e01a18?auto=format&fit=crop&q=80&w=500' },
  { id: 2, title: '추계 워크숍', date: '2024.10.15', img: 'https://images.unsplash.com/photo-1517048676732-d65bc937f952?auto=format&fit=crop&q=80&w=500' },
  { id: 3, title: '신규 프로젝트 킥오프', date: '2024.08.01', img: 'https://images.unsplash.com/photo-1522071820081-009f0129c71c?auto=format&fit=crop&q=80&w=500' },
];

const App = () => {
  const [activeTab, setActiveTab] = useState('home');
  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);

  // 탭 변경 핸들러
  const handleTabChange = (tab) => {
    setActiveTab(tab);
    setIsMobileMenuOpen(false);
  };

  // --- 컴포넌트: 홈 (대시보드) ---
  const HomeSection = () => (
    <div className="space-y-6 animate-fade-in">
      {/* 웰컴 배너 */}
      <div className="bg-gradient-to-r from-blue-800 to-indigo-900 rounded-2xl p-8 text-white shadow-lg relative overflow-hidden">
        <div className="absolute right-0 top-0 opacity-10 transform translate-x-10 -translate-y-10">
          <LayoutGrid size={200} />
        </div>
        <div className="relative z-10">
          <h2 className="text-3xl font-bold mb-2">17G ETCH 부서에 오신 것을 환영합니다</h2>
          <p className="text-blue-100 max-w-2xl">
            우리는 혁신적인 기술과 팀워크로 최고의 가치를 만들어갑니다.<br />
            오늘도 활기찬 하루 보내세요!
          </p>
        </div>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        {/* 공지사항 */}
        <div className="lg:col-span-2 bg-white rounded-xl shadow-sm border border-gray-100 p-6">
          <div className="flex items-center justify-between mb-4">
            <h3 className="font-bold text-lg flex items-center gap-2">
              <Bell className="text-blue-600" size={20} /> 공지사항
            </h3>
            <button className="text-sm text-gray-400 hover:text-blue-600">더보기</button>
          </div>
          <div className="divide-y divide-gray-100">
            {NOTICE_DATA.map((item) => (
              <div key={item.id} className="py-3 flex items-start gap-3 hover:bg-gray-50 transition-colors cursor-pointer rounded-lg px-2">
                <div className={`mt-1 w-2 h-2 rounded-full flex-shrink-0 ${item.important ? 'bg-red-500' : 'bg-gray-300'}`} />
                <div className="flex-grow">
                  <h4 className="text-gray-800 font-medium text-sm md:text-base">{item.title}</h4>
                  <div className="text-xs text-gray-500 mt-1 flex gap-2">
                    <span>{item.date}</span>
                    <span className="w-px h-3 bg-gray-300"></span>
                    <span>{item.author}</span>
                  </div>
                </div>
                {item.important && <span className="text-xs bg-red-50 text-red-600 px-2 py-0.5 rounded font-bold">필독</span>}
              </div>
            ))}
          </div>
        </div>

        {/* 퀵 메뉴 & 일정 */}
        <div className="space-y-6">
          <div className="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
            <h3 className="font-bold text-lg mb-4 flex items-center gap-2">
              <ExternalLink size={20} className="text-green-600" /> 바로가기
            </h3>
            <div className="grid grid-cols-2 gap-3">
              <button className="p-3 bg-gray-50 hover:bg-blue-50 hover:text-blue-700 rounded-lg text-sm font-medium transition-colors text-left flex flex-col gap-2">
                <FileText size={20} /> 전자결재
              </button>
              <button className="p-3 bg-gray-50 hover:bg-blue-50 hover:text-blue-700 rounded-lg text-sm font-medium transition-colors text-left flex flex-col gap-2">
                <Calendar size={20} /> 회의실 예약
              </button>
              <button className="p-3 bg-gray-50 hover:bg-blue-50 hover:text-blue-700 rounded-lg text-sm font-medium transition-colors text-left flex flex-col gap-2">
                <MessageSquare size={20} /> 사내 메신저
              </button>
              <button className="p-3 bg-gray-50 hover:bg-blue-50 hover:text-blue-700 rounded-lg text-sm font-medium transition-colors text-left flex flex-col gap-2">
                <Mail size={20} /> 웹메일
              </button>
            </div>
          </div>

          <div className="bg-blue-50 rounded-xl p-6 border border-blue-100">
            <h3 className="font-bold text-blue-900 mb-3 text-lg">이번 달 주요 일정</h3>
            <ul className="space-y-3">
              <li className="flex gap-3 text-sm">
                <div className="flex-shrink-0 w-12 bg-white rounded text-center py-1 shadow-sm border border-blue-100">
                  <div className="text-xs text-gray-500">JAN</div>
                  <div className="font-bold text-blue-600">05</div>
                </div>
                <div>
                  <div className="font-bold text-gray-800">주간 회의</div>
                  <div className="text-gray-500 text-xs">10:00 AM • 대회의실</div>
                </div>
              </li>
              <li className="flex gap-3 text-sm">
                <div className="flex-shrink-0 w-12 bg-white rounded text-center py-1 shadow-sm border border-blue-100">
                  <div className="text-xs text-gray-500">JAN</div>
                  <div className="font-bold text-blue-600">12</div>
                </div>
                <div>
                  <div className="font-bold text-gray-800">프로젝트 마감</div>
                  <div className="text-gray-500 text-xs">18:00 PM</div>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  );

  // --- 컴포넌트: 팀원 소개 ---
  const TeamSection = () => (
    <div className="animate-fade-in">
      <div className="mb-6">
        <h2 className="text-2xl font-bold text-gray-800">부서 조직도</h2>
        <p className="text-gray-500">함께 일하는 동료들을 소개합니다.</p>
      </div>
      <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {TEAM_DATA.map((member) => (
          <div key={member.id} className="bg-white rounded-xl shadow-sm border border-gray-100 p-6 flex items-start gap-4 hover:shadow-md transition-shadow">
            <img src={member.img} alt={member.name} className="w-16 h-16 rounded-full object-cover border-2 border-gray-100" />
            <div>
              <h3 className="font-bold text-lg text-gray-800">{member.name}</h3>
              <div className="text-blue-600 font-medium text-sm mb-2">{member.role}</div>
              <div className="space-y-1 text-sm text-gray-500">
                <div className="flex items-center gap-2"><Mail size={14} /> {member.email}</div>
                <div className="flex items-center gap-2"><Phone size={14} /> {member.phone}</div>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  );

  // --- 컴포넌트: 자료실 ---
  const ResourceSection = () => (
    <div className="animate-fade-in">
      <div className="mb-6 flex justify-between items-end">
        <div>
          <h2 className="text-2xl font-bold text-gray-800">자료실</h2>
          <p className="text-gray-500">업무에 필요한 문서와 양식을 다운로드하세요.</p>
        </div>
        <div className="relative hidden md:block">
          <input type="text" placeholder="자료 검색..." className="pl-9 pr-4 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" />
          <Search size={16} className="absolute left-3 top-2.5 text-gray-400" />
        </div>
      </div>
      
      <div className="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
        <table className="w-full text-left">
          <thead className="bg-gray-50 text-gray-500 text-sm">
            <tr>
              <th className="p-4 font-medium">문서 제목</th>
              <th className="p-4 font-medium hidden sm:table-cell">카테고리</th>
              <th className="p-4 font-medium hidden sm:table-cell">크기</th>
              <th className="p-4 font-medium text-right">다운로드</th>
            </tr>
          </thead>
          <tbody className="divide-y divide-gray-100">
            {RESOURCES_DATA.map((file) => (
              <tr key={file.id} className="hover:bg-gray-50 transition-colors">
                <td className="p-4">
                  <div className="flex items-center gap-3">
                    <div className={`w-8 h-8 rounded flex items-center justify-center text-xs font-bold ${file.type === 'PDF' ? 'bg-red-100 text-red-600' : file.type === 'XLSX' ? 'bg-green-100 text-green-600' : 'bg-blue-100 text-blue-600'}`}>
                      {file.type}
                    </div>
                    <span className="font-medium text-gray-800">{file.title}</span>
                  </div>
                </td>
                <td className="p-4 text-gray-500 text-sm hidden sm:table-cell">
                  <span className="bg-gray-100 px-2 py-1 rounded">{file.category}</span>
                </td>
                <td className="p-4 text-gray-400 text-sm hidden sm:table-cell">{file.size}</td>
                <td className="p-4 text-right">
                  <button className="text-gray-400 hover:text-blue-600 p-2 rounded-full hover:bg-blue-50 transition-colors">
                    <Download size={20} />
                  </button>
                </td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>
  );

  // --- 컴포넌트: 갤러리 ---
  const GallerySection = () => (
    <div className="animate-fade-in">
      <div className="mb-6">
        <h2 className="text-2xl font-bold text-gray-800">팀 갤러리</h2>
        <p className="text-gray-500">우리 부서의 즐거웠던 순간들입니다.</p>
      </div>
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {GALLERY_DATA.map((item) => (
          <div key={item.id} className="group bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-lg transition-all">
            <div className="relative h-48 overflow-hidden">
              <img src={item.img} alt={item.title} className="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" />
              <div className="absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors" />
            </div>
            <div className="p-4">
              <h3 className="font-bold text-lg text-gray-800 mb-1">{item.title}</h3>
              <p className="text-sm text-gray-500 flex items-center gap-1">
                <Calendar size={14} /> {item.date}
              </p>
            </div>
          </div>
        ))}
      </div>
    </div>
  );

  return (
    <div className="min-h-screen bg-gray-50 font-sans text-gray-900 flex flex-col md:flex-row">
      
      {/* 사이드바 (데스크탑) */}
      <aside className="hidden md:flex flex-col w-64 bg-white border-r border-gray-200 h-screen sticky top-0">
        <div className="p-6 border-b border-gray-100">
          <div className="flex items-center gap-2 text-blue-800 font-bold text-xl">
            <LayoutGrid className="text-blue-600" />
            <span>17G ETCH</span>
          </div>
          <div className="text-xs text-gray-400 mt-1">Department Intranet</div>
        </div>
        
        <nav className="flex-grow p-4 space-y-1">
          <button onClick={() => handleTabChange('home')} className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors ${activeTab === 'home' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900'}`}>
            <LayoutGrid size={20} /> 대시보드
          </button>
          <button onClick={() => handleTabChange('team')} className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors ${activeTab === 'team' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900'}`}>
            <Users size={20} /> 부서 조직도
          </button>
          <button onClick={() => handleTabChange('resources')} className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors ${activeTab === 'resources' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900'}`}>
            <FileText size={20} /> 자료실
          </button>
          <button onClick={() => handleTabChange('gallery')} className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors ${activeTab === 'gallery' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900'}`}>
            <ImageIcon size={20} /> 갤러리
          </button>
        </nav>

        <div className="p-4 border-t border-gray-100">
          <div className="bg-gray-50 rounded-lg p-4 flex items-center gap-3">
            <img src="https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?auto=format&fit=crop&q=80&w=100" className="w-10 h-10 rounded-full" alt="User" />
            <div className="overflow-hidden">
              <div className="font-bold text-sm truncate">김접속</div>
              <div className="text-xs text-gray-500 truncate">사원 / 개발팀</div>
            </div>
          </div>
        </div>
      </aside>

      {/* 모바일 헤더 */}
      <div className="md:hidden bg-white border-b border-gray-200 p-4 flex items-center justify-between sticky top-0 z-20">
        <div className="font-bold text-lg text-blue-800">17G ETCH</div>
        <button onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)} className="text-gray-600">
          {isMobileMenuOpen ? <X /> : <Menu />}
        </button>
      </div>

      {/* 모바일 메뉴 드로어 */}
      {isMobileMenuOpen && (
        <div className="md:hidden fixed inset-0 z-10 bg-black/50" onClick={() => setIsMobileMenuOpen(false)}>
          <div className="bg-white w-3/4 h-full p-4 space-y-2" onClick={e => e.stopPropagation()}>
            <button onClick={() => handleTabChange('home')} className="w-full text-left p-3 rounded hover:bg-gray-50 font-medium text-gray-700">대시보드</button>
            <button onClick={() => handleTabChange('team')} className="w-full text-left p-3 rounded hover:bg-gray-50 font-medium text-gray-700">부서 조직도</button>
            <button onClick={() => handleTabChange('resources')} className="w-full text-left p-3 rounded hover:bg-gray-50 font-medium text-gray-700">자료실</button>
            <button onClick={() => handleTabChange('gallery')} className="w-full text-left p-3 rounded hover:bg-gray-50 font-medium text-gray-700">갤러리</button>
          </div>
        </div>
      )}

      {/* 메인 콘텐츠 영역 */}
      <main className="flex-grow p-4 md:p-8 overflow-y-auto h-[calc(100vh-60px)] md:h-screen">
        <header className="flex justify-between items-center mb-8">
          <div className="text-gray-500 text-sm flex items-center gap-2">
            <span className="hidden md:inline">Company Intranet</span>
            <ChevronRight size={14} />
            <span className="font-medium text-blue-600">
              {activeTab === 'home' && 'Dashboard'}
              {activeTab === 'team' && 'Team Members'}
              {activeTab === 'resources' && 'Resources'}
              {activeTab === 'gallery' && 'Gallery'}
            </span>
          </div>
          <div className="flex gap-4">
            <button className="relative p-2 text-gray-400 hover:text-blue-600 transition-colors">
              <Bell size={20} />
              <span className="absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full border border-white"></span>
            </button>
          </div>
        </header>

        {activeTab === 'home' && <HomeSection />}
        {activeTab === 'team' && <TeamSection />}
        {activeTab === 'resources' && <ResourceSection />}
        {activeTab === 'gallery' && <GallerySection />}

        <footer className="mt-12 border-t border-gray-200 pt-6 text-center text-xs text-gray-400 pb-8">
          &copy; 2025 17G ETCH Department. All rights reserved.<br/>
          Designed for internal use only.
        </footer>
      </main>
    </div>
  );
};

export default App;

        );

        const Icons = {
            Gift: (props) => <Icon {...props} path={<><rect x="3" y="8" width="18" height="4" rx="1"/><path d="M12 8v13"/><path d="M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7"/><path d="M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5"/></>} />,
            Plus: (props) => <Icon {...props} path={<><path d="M5 12h14"/><path d="M12 5v14"/></>} />,
            Trash2: (props) => <Icon {...props} path={<><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></>} />,
            CheckCircle: (props) => <Icon {...props} path={<><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></>} />,
            Circle: (props) => <Icon {...props} path={<circle cx="12" cy="12" r="10"/>} />,
            Calculator: (props) => <Icon {...props} path={<><rect width="16" height="20" x="4" y="2" rx="2"/><line x1="8" x2="16" y1="6" y2="6"/><line x1="16" x2="16" y1="14" y2="18"/><path d="M16 10h.01"/><path d="M12 10h.01"/><path d="M8 10h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/></>} />,
            Package: (props) => <Icon {...props} path={<><path d="m16.5 9.4-9-5.19"/><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" x2="12" y1="22.08" y2="12"/></>} />,
            ImageIcon: (props) => <Icon {...props} path={<><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></>} />,
            Sparkles: (props) => <Icon {...props} path={<><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275Z"/></>} />,
        };

        // --- 스마트 이미지 매핑 데이터 ---
        const SMART_IMAGES = {
            '워치': 'https://images.samsung.com/is/image/samsung/p6pim/sec/watch6-classic-47mm-lte/gallery/sec-watch6-classic-47mm-lte-sm-r965nzkakoo-537443187?$684_547_PNG$',
            '갤럭시': 'https://images.samsung.com/is/image/samsung/p6pim/sec/watch6-classic-47mm-lte/gallery/sec-watch6-classic-47mm-lte-sm-r965nzkakoo-537443187?$684_547_PNG$',
            '버즈': 'https://images.samsung.com/is/image/samsung/p6pim/sec/sm-r510nzaakoo/gallery/sec-galaxy-buds2-pro-r510-sm-r510nzaakoo-533190861?$684_547_PNG$',
            '에어팟': 'https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/MTJV3?wid=1144&hei=1144&fmt=jpeg&qlt=90&.v=1694014871985',
            '아이패드': 'https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-pro-model-select-gallery-2-202212?wid=5120&hei=2880&fmt=p-jpg&qlt=95&.v=1667609546275',
            '커피': 'https://www.nespresso.com/ecom/medias/sys_master/public/12596226523166/Vertuo-Pop-Mango-Yellow-3D-Media-800x800.png',
            '네스프레소': 'https://www.nespresso.com/ecom/medias/sys_master/public/12596226523166/Vertuo-Pop-Mango-Yellow-3D-Media-800x800.png',
            '라면': 'https://sitem.ssgcdn.com/72/79/17/item/1000021177972_i1_1200.jpg',
            '신라면': 'https://sitem.ssgcdn.com/72/79/17/item/1000021177972_i1_1200.jpg',
            '상품권': 'https://img.danawa.com/prod_img/500000/066/141/img/13141066_1.jpg?shrink=500:500&_v=20211124172730',
            '신세계': 'https://img.danawa.com/prod_img/500000/066/141/img/13141066_1.jpg?shrink=500:500&_v=20211124172730',
            '배터리': 'https://img.danawa.com/prod_img/500000/664/885/img/16885664_1.jpg?shrink=500:500&_v=20220426154527',
            '보조배터리': 'https://img.danawa.com/prod_img/500000/664/885/img/16885664_1.jpg?shrink=500:500&_v=20220426154527',
            '위스키': 'https://images.unsplash.com/photo-1527281400683-1aae777175f8?q=80&w=1000&auto=format&fit=crop',
            '글렌피딕': 'https://images.unsplash.com/photo-1527281400683-1aae777175f8?q=80&w=1000&auto=format&fit=crop',
            '로얄살루트': 'https://images.unsplash.com/photo-1569529465841-dfecd47550f2?q=80&w=1000&auto=format&fit=crop',
            '화요': 'https://images.unsplash.com/photo-1586720076269-a1b7027a0558?q=80&w=1000&auto=format&fit=crop',
            '소주': 'https://images.unsplash.com/photo-1586720076269-a1b7027a0558?q=80&w=1000&auto=format&fit=crop',
            '치약': 'https://img.danawa.com/prod_img/500000/003/755/img/17755003_1.jpg?shrink=500:500',
            '스팸': 'https://sitem.ssgcdn.com/60/00/64/item/1000021640060_i1_1200.jpg',
        };

        const App = () => {
            // LocalStorage에서 초기 데이터 불러오기
            const loadInitialData = () => {
                try {
                    const saved = localStorage.getItem('yearEndPrizes_v2');
                    return saved ? JSON.parse(saved) : [];
                } catch (e) { return []; }
            };

            const [prizes, setPrizes] = useState(loadInitialData);
            const [newItem, setNewItem] = useState({ name: '', price: '', quantity: '', imageUrl: '' });
            const [filter, setFilter] = useState('all');
            const [isAutoFilling, setIsAutoFilling] = useState(false);

            // 데이터 변경 시 자동 저장
            useEffect(() => {
                localStorage.setItem('yearEndPrizes_v2', JSON.stringify(prizes));
            }, [prizes]);

            // ✨ 스마트 이미지 자동완성 로직 (3가지 조건 충족 시)
            useEffect(() => {
                if (newItem.imageUrl) return; // 이미지가 있으면 패스
                const isAllFieldsFilled = newItem.name.trim() !== '' && newItem.price !== '' && newItem.quantity !== '';
                
                if (!isAllFieldsFilled) return;

                const timer = setTimeout(() => {
                    const foundKeyword = Object.keys(SMART_IMAGES).find(keyword => 
                        newItem.name.toLowerCase().includes(keyword.toLowerCase())
                    );

                    if (foundKeyword) {
                        setIsAutoFilling(true);
                        setNewItem(prev => ({
                            ...prev,
                            imageUrl: SMART_IMAGES[foundKeyword]
                        }));
                        setTimeout(() => setIsAutoFilling(false), 1000);
                    }
                }, 500);
                return () => clearTimeout(timer);
            }, [newItem.name, newItem.price, newItem.quantity, newItem.imageUrl]);

            const handleAddPrize = (e) => {
                e.preventDefault();
                if (!newItem.name || !newItem.price || !newItem.quantity) return;

                let finalImageUrl = newItem.imageUrl.trim();
                if (!finalImageUrl) {
                    finalImageUrl = `https://placehold.co/400x400/png?text=${encodeURIComponent(newItem.name)}`;
                }

                const newPrize = {
                    id: Date.now(),
                    name: newItem.name,
                    price: parseInt(newItem.price),
                    quantity: parseInt(newItem.quantity),
                    imageUrl: finalImageUrl,
                    isPrepared: false,
                    createdAt: Date.now()
                };

                // 최신순 정렬
                setPrizes([newPrize, ...prizes]);
                setNewItem({ name: '', price: '', quantity: '', imageUrl: '' });
            };

            const handleDeletePrize = (id) => {
                if (window.confirm('정말 삭제하시겠습니까?')) {
                    setPrizes(prizes.filter(p => p.id !== id));
                }
            };

            const togglePrepared = (id) => {
                setPrizes(prizes.map(p => p.id === id ? { ...p, isPrepared: !p.isPrepared } : p));
            };

            const formatCurrency = (amount) => new Intl.NumberFormat('ko-KR').format(amount);
            const totalBudget = prizes.reduce((acc, item) => acc + (item.price * item.quantity), 0);
            const totalItems = prizes.reduce((acc, item) => acc + item.quantity, 0);
            const preparedCount = prizes.filter(item => item.isPrepared).length;
            const filteredPrizes = prizes.filter(item => {
                if (filter === 'pending') return !item.isPrepared;
                if (filter === 'completed') return item.isPrepared;
                return true;
            });

            return (
                <div className="min-h-screen pb-24 max-w-3xl mx-auto">
                     <header className="bg-gradient-to-r from-red-800 to-red-600 text-white p-6 shadow-lg sticky top-0 z-20 md:rounded-b-xl">
                        <div className="flex items-center justify-between">
                            <div className="flex items-center gap-3">
                                <Icons.Gift size={28} className="text-yellow-300" />
                                <div>
                                    <h1 className="text-xl font-bold tracking-tight">17G ETCH 경품팀</h1>
                                    <div className="text-xs text-red-100 flex items-center gap-1">
                                        <Icons.Sparkles size={12} /> 자동 이미지 (로컬저장)
                                    </div>
                                </div>
                            </div>
                            <div className="text-xs bg-black/20 px-3 py-1 rounded-full backdrop-blur-sm">2025 송년회</div>
                        </div>
                    </header>

                    <div className="p-4 space-y-5">
                        {/* 대시보드 */}
                        <div className="grid grid-cols-3 gap-3">
                            <div className="bg-white p-3 rounded-xl shadow-sm border-b-4 border-slate-700 text-center">
                                <div className="text-gray-400 text-xs mb-1 flex justify-center items-center gap-1"><Icons.Calculator size={12} /> 예산</div>
                                <div className="font-bold text-slate-800 truncate">{formatCurrency(totalBudget)}</div>
                            </div>
                            <div className="bg-white p-3 rounded-xl shadow-sm border-b-4 border-blue-500 text-center">
                                <div className="text-gray-400 text-xs mb-1 flex justify-center items-center gap-1"><Icons.Package size={12} /> 수량</div>
                                <div className="font-bold text-blue-600">{totalItems}개</div>
                            </div>
                            <div className="bg-white p-3 rounded-xl shadow-sm border-b-4 border-green-500 text-center">
                                <div className="text-gray-400 text-xs mb-1 flex justify-center items-center gap-1"><Icons.CheckCircle size={12} /> 완료</div>
                                <div className="font-bold text-green-600">{preparedCount}/{prizes.length}</div>
                            </div>
                        </div>

                        {/* 입력 폼 */}
                        <div className="bg-white p-5 rounded-xl shadow-sm border border-gray-100 relative overflow-hidden transition-all duration-300">
                            {isAutoFilling && (
                                <div className="absolute top-0 right-0 left-0 h-1 bg-gradient-to-r from-yellow-300 via-yellow-500 to-yellow-300 animate-pulse z-10"></div>
                            )}
                            <h2 className="text-sm font-bold text-gray-600 mb-3 flex items-center gap-2">
                                <Icons.Plus size={16} className="text-red-500" /> 경품 등록
                            </h2>
                            <form onSubmit={handleAddPrize} className="flex flex-col gap-3">
                                <div className="flex flex-col md:flex-row gap-3">
                                    <div className="flex-grow">
                                        <label className="block text-xs text-gray-400 mb-1 ml-1">상품명</label>
                                        <input type="text" placeholder="예: 신라면 1박스" className="w-full p-3 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 transition-all text-sm" value={newItem.name} onChange={(e) => setNewItem({ ...newItem, name: e.target.value })} required />
                                    </div>
                                    <div className="flex-grow md:w-5/12">
                                        <label className="block text-xs text-gray-400 mb-1 ml-1 flex justify-between">
                                            <span>이미지 URL</span>
                                            <span className="text-red-400 font-normal">3가지 입력 시 자동완성</span>
                                        </label>
                                        <div className="relative">
                                            <input type="text" placeholder="자동 입력됨" className={`w-full p-3 pl-9 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 transition-all text-sm truncate ${isAutoFilling ? 'bg-yellow-50 text-yellow-800 font-medium' : ''}`} value={newItem.imageUrl} onChange={(e) => setNewItem({ ...newItem, imageUrl: e.target.value })} />
                                            <Icons.ImageIcon size={16} className={`absolute left-3 top-3.5 ${newItem.imageUrl ? 'text-red-500' : 'text-gray-400'}`} />
                                        </div>
                                    </div>
                                </div>
                                <div className="flex gap-3">
                                    <div className="flex-grow">
                                        <label className="block text-xs text-gray-400 mb-1 ml-1">단가</label>
                                        <input type="number" placeholder="금액 (원)" className="w-full p-3 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 transition-all text-sm text-right" value={newItem.price} onChange={(e) => setNewItem({ ...newItem, price: e.target.value })} required />
                                    </div>
                                    <div className="w-24">
                                        <label className="block text-xs text-gray-400 mb-1 ml-1">수량</label>
                                        <input type="number" placeholder="개수" className="w-full p-3 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 transition-all text-sm text-center" value={newItem.quantity} onChange={(e) => setNewItem({ ...newItem, quantity: e.target.value })} required min="1" />
                                    </div>
                                    <div className="self-end">
                                        <button type="submit" className="bg-slate-800 hover:bg-slate-900 text-white p-3 rounded-lg font-medium shadow-sm h-[46px] w-[60px] flex items-center justify-center transition-transform active:scale-95">
                                            <Icons.Plus size={20} />
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>

                        {/* 리스트 */}
                        <div className="space-y-3">
                            <div className="flex justify-end mb-2">
                                <div className="flex bg-white p-1 rounded-lg border border-gray-200 shadow-sm">
                                    {['all', 'pending', 'completed'].map((f) => (
                                        <button key={f} onClick={() => setFilter(f)} className={`px-3 py-1 text-xs rounded-md transition-colors ${filter === f ? 'bg-slate-800 text-white' : 'text-gray-500 hover:bg-gray-50'}`}>{f === 'all' ? '전체' : f === 'pending' ? '준비중' : '완료'}</button>
                                    ))}
                                </div>
                            </div>
                            
                            {filteredPrizes.length === 0 ? (
                                <div className="bg-white rounded-xl p-12 text-center text-gray-400 border border-dashed border-gray-300">
                                    <p className="text-sm">경품명, 금액, 수량을 모두 입력해보세요!</p>
                                </div>
                            ) : (
                                filteredPrizes.map((item) => (
                                    <div key={item.id} className={`bg-white rounded-xl p-3 flex gap-3 shadow-sm border border-gray-100 transition-all ${item.isPrepared ? 'opacity-60 bg-gray-50 grayscale' : 'hover:shadow-md'}`}>
                                        <div onClick={() => togglePrepared(item.id)} className="cursor-pointer relative group flex-shrink-0">
                                            <div className="w-16 h-16 rounded-lg bg-gray-100 overflow-hidden border border-gray-200">
                                                <img src={item.imageUrl} alt={item.name} className="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" onError={(e) => { e.target.src = `https://placehold.co/100x100?text=${encodeURIComponent(item.name.slice(0,2))}`; }} />
                                            </div>
                                            <div className={`absolute -top-2 -left-2 bg-white rounded-full p-0.5 shadow-md transition-transform ${item.isPrepared ? 'scale-100 text-green-500' : 'scale-0 group-hover:scale-100 text-gray-300'}`}>
                                                <Icons.CheckCircle size={22} className="fill-current bg-white rounded-full" />
                                            </div>
                                        </div>
                                        <div className="flex-grow flex flex-col justify-center min-w-0">
                                            <div className={`font-bold text-base mb-1 truncate ${item.isPrepared ? 'line-through text-gray-400' : 'text-slate-800'}`}>{item.name}</div>
                                            <div className="text-xs text-gray-500 flex gap-2">
                                                <span className="bg-slate-100 px-1.5 py-0.5 rounded">@{formatCurrency(item.price)}</span>
                                                <span className="bg-red-50 text-red-600 px-1.5 py-0.5 rounded font-bold">x{item.quantity}</span>
                                            </div>
                                        </div>
                                        <div className="flex flex-col items-end justify-between py-1 flex-shrink-0">
                                            <div className="font-bold text-slate-700 text-lg">{formatCurrency(item.price * item.quantity)}</div>
                                            <button onClick={() => handleDeletePrize(item.id)} className="text-gray-300 hover:text-red-500 p-1 rounded hover:bg-red-50 transition-colors"><Icons.Trash2 size={16} /></button>
                                        </div>
                                    </div>
                                ))
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>


